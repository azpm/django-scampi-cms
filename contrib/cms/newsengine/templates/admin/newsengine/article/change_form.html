{% extends "admin/change_form.html" %}

{% load i18n %}

{% block object-tools %}
{% if change %}{% if not is_popup %}
  <ul class="object-tools">
    <li><a href="history/" class="historylink">{% trans "History" %}</a></li>
    {% if has_absolute_url %}
        <li><a href="../../../r/{{ content_type_id }}/{{ object_id }}/" class="viewsitelink">
            {% trans "View on site" %}</a>
        </li>
    {% endif%}
    <li><a href="{% url admin:newsengine-article-preview %}" id="preview-link" class="viewsitelink">Preview</a>
  </ul>
{% endif %}{% endif %}

{% endblock %}

{% block extrahead %}
{{ block.super }}
{% if object_id and original %}
<script type="text/javascript">
    jQuery(document).ready(function() {
        var preview_url = "{% url admin:newsengine-article-preview %}";
        
        //override the save method to bundle up the filters correctly
        jQuery("#dynamicpicker_form").submit(function() {
            return picker_form.bundle_filters();
        });
    });
    
</script>
{% else %}
<script type="text/javascript">
    django.jQuery(document).ready(function() {
        //override the save method to bundle up the filters correctly
        django.jQuery(".add-row > a").trigger("click");
    });
</script>

{% endif %}

{% endblock %}